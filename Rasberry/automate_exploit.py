#!/usr/bin/env python


from metasploit.msfrpc import MsfRpcClient
from metasploit.msfconsole import MsfRpcConsole


#os.system('msfrpcd -P ouss1980 -n -f -a 127.0.0.1')

global line_with_positive
line_with_positive = list ()

global status_of_console
status_of_console = False

def console_reader(data_in_console):
	status_of_console = data_in_console['busy']
	print status_of_console
	if '[+]' in data_in_console['data']:
		con_data = data_in_console['data'].rstrip().split('\n')
		for line in con_data:
			if '[+]' in line:
				line_with_positive.append(line)

client = MsfRpcClient('admin')
console = MsfRpcConsole(client, cb = console_reader)



